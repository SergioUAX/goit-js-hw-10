{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\r\nimport \"flatpickr/dist/flatpickr.min.css\";\r\n\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\nimport errorIcon from \"../img/errorIcon.svg\";\r\n\r\nconst datePicker = document.querySelector(\"#datetime-picker\");\r\ndatePicker.classList.add(\"datetime-picker\");\r\n\r\nconst buttonDataStart = document.querySelector(\"button[data-start]\");\r\nbuttonDataStart.classList.add(\"button-data-start\");\r\nbuttonDataStart.disabled = true;\r\n\r\nlet userSelectedDate = null;\r\nlet timerInterval;\r\n\r\nconst options = {\r\n    enableTime: true,\r\n    time_24hr: true,\r\n    defaultDate: new Date(),\r\n    minuteIncrement: 1,\r\n    onClose(selectedDates) {\r\n        userSelectedDate = selectedDates[0].getTime();        \r\n        if (userSelectedDate > Date.now()) {\r\n            buttonDataStart.disabled = false;            \r\n        }\r\n        else { \r\n            iziToast.error({                \r\n                message: 'Please choose a date in the future',\r\n                position: 'topRight',\r\n                backgroundColor: '#ef4040',\r\n                messageColor: '#fff',\r\n                iconUrl: errorIcon,\r\n                iconColor: '#fff', \r\n                theme: 'dark',\r\n            });\r\n            buttonDataStart.disabled = true;\r\n        }        \r\n  },\r\n};\r\n\r\nbuttonDataStart.addEventListener(\"click\", () => {\r\n    buttonDataStart.disabled = true;\r\n    datePicker.disabled = true;\r\n    updateTimerValue();\r\n    timerInterval = setInterval(updateTimerValue, 1000);\r\n\r\n    function updateTimerValue() {\r\n        const timerLeft = userSelectedDate - Date.now();\r\n        if (timerLeft <= 0) {\r\n            clearInterval(timerInterval); \r\n            datePicker.disabled = false;\r\n            updateTimerScreen({ days: 0, hours: 0, minutes: 0, seconds: 0 }); \r\n            return;\r\n        }\r\n        updateTimerScreen(convertMs(timerLeft));\r\n    }       \r\n});\r\n\r\nflatpickr(\"#datetime-picker\", options);\r\n\r\nfunction convertMs(ms) {  \r\n  const second = 1000;\r\n  const minute = second * 60;\r\n  const hour = minute * 60;\r\n  const day = hour * 24;\r\n\r\n  const days = Math.floor(ms / day);  \r\n  const hours = Math.floor((ms % day) / hour);\r\n  const minutes = Math.floor(((ms % day) % hour) / minute);\r\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\r\n\r\n  return { days, hours, minutes, seconds };\r\n}\r\n\r\n\r\nfunction updateTimerScreen({ days, hours, minutes, seconds }) {\r\n  document.querySelector(\"[data-days]\").textContent = days.toString().padStart(2, \"0\");\r\n  document.querySelector(\"[data-hours]\").textContent = hours.toString().padStart(2, \"0\");\r\n  document.querySelector(\"[data-minutes]\").textContent = minutes.toString().padStart(2, \"0\");\r\n  document.querySelector(\"[data-seconds]\").textContent = seconds.toString().padStart(2, \"0\");\r\n}\r\n\r\n"],"names":["datePicker","buttonDataStart","userSelectedDate","timerInterval","options","selectedDates","iziToast","errorIcon","updateTimerValue","timerLeft","updateTimerScreen","convertMs","flatpickr","ms","days","hours","minutes","seconds"],"mappings":"8IAQA,MAAMA,EAAa,SAAS,cAAc,kBAAkB,EAC5DA,EAAW,UAAU,IAAI,iBAAiB,EAE1C,MAAMC,EAAkB,SAAS,cAAc,oBAAoB,EACnEA,EAAgB,UAAU,IAAI,mBAAmB,EACjDA,EAAgB,SAAW,GAE3B,IAAIC,EAAmB,KACnBC,EAEJ,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBH,EAAmBG,EAAc,CAAC,EAAE,QAAO,EACvCH,EAAmB,KAAK,MACxBD,EAAgB,SAAW,IAG3BK,EAAS,MAAM,CACX,QAAS,qCACT,SAAU,WACV,gBAAiB,UACjB,aAAc,OACd,QAASC,EACT,UAAW,OACX,MAAO,MACvB,CAAa,EACDN,EAAgB,SAAW,GAEpC,CACH,EAEAA,EAAgB,iBAAiB,QAAS,IAAM,CAC5CA,EAAgB,SAAW,GAC3BD,EAAW,SAAW,GACtBQ,IACAL,EAAgB,YAAYK,EAAkB,GAAI,EAElD,SAASA,GAAmB,CACxB,MAAMC,EAAYP,EAAmB,KAAK,IAAG,EAC7C,GAAIO,GAAa,EAAG,CAChB,cAAcN,CAAa,EAC3BH,EAAW,SAAW,GACtBU,EAAkB,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAE,EAC/D,MACH,CACDA,EAAkBC,EAAUF,CAAS,CAAC,CACzC,CACL,CAAC,EAEDG,EAAU,mBAAoBR,CAAO,EAErC,SAASO,EAAUE,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAGA,SAASP,EAAkB,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC5D,SAAS,cAAc,aAAa,EAAE,YAAcH,EAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,EACnF,SAAS,cAAc,cAAc,EAAE,YAAcC,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACrF,SAAS,cAAc,gBAAgB,EAAE,YAAcC,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EACzF,SAAS,cAAc,gBAAgB,EAAE,YAAcC,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,CAC3F"}